<!doctype html>
<html><head><meta charset="utf-8"><title>Login - Senimen</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="bg-gray-50">
<script src="assets/js/auth.js"></script>
<script>renderNavbar();</script>
<main class="min-h-[75vh] flex items-start justify-center">
<div class="max-w-md w-full mx-auto mt-16 bg-white shadow rounded-2xl p-8">
<h1 class="text-3xl font-bold mb-5">Login</h1>
<form id="loginForm" class="space-y-3">
  <input class="w-full border rounded p-3" name="email" placeholder="Email" required />
  <input class="w-full border rounded p-3" name="password" placeholder="Password" type="password" required />
  <button class="w-full bg-blue-600 text-white rounded-lg p-3 text-base" type="submit">Login</button>
  <div id="msg" class="text-red-600 text-sm"></div>
  <p class="text-xs text-gray-500">Default admin: admin@senimen.local / admin123</p>
</form>
</div>
</main>
<script src="assets/js/api.js"></script>
<script>
const form = document.getElementById('loginForm');
form.addEventListener('submit', async (e)=>{
  e.preventDefault();
  const data = Object.fromEntries(new FormData(form).entries());
  try{
    const res = await fetch(apiBase+'/api/auth/login',{method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(data)});
    if(res.status===401){ document.getElementById('msg').textContent = 'Invalid credentials'; return; }
    const body = await res.json();
    localStorage.setItem('token', body.token);
    localStorage.setItem('user', JSON.stringify(body.user));
    const role = (body.user.role||'').toLowerCase();
    if(role==='admin') location.href='/frontend/admin-dashboard.html';
    else if(role==='organizer') location.href='/frontend/org-dashboard.html';
    else location.href = '/frontend/profile.html';
  }catch(err){ document.getElementById('msg').textContent = 'Error'; }
});
</script>
<script>renderFooter();</script>
</body></html>
